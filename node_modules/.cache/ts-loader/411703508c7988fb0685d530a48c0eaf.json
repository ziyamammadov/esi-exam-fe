{"remainingRequest":"/Users/ziya/Development/Other/esi-project-vue/node_modules/thread-loader/dist/cjs.js!/Users/ziya/Development/Other/esi-project-vue/node_modules/babel-loader/lib/index.js!/Users/ziya/Development/Other/esi-project-vue/node_modules/ts-loader/index.js??ref--13-3!/Users/ziya/Development/Other/esi-project-vue/src/services/AuthService.ts","dependencies":[{"path":"/Users/ziya/Development/Other/esi-project-vue/src/services/AuthService.ts","mtime":1652648894533},{"path":"/Users/ziya/Development/Other/esi-project-vue/node_modules/cache-loader/dist/cjs.js","mtime":1652517625200},{"path":"/Users/ziya/Development/Other/esi-project-vue/node_modules/thread-loader/dist/cjs.js","mtime":1652517615799},{"path":"/Users/ziya/Development/Other/esi-project-vue/node_modules/babel-loader/lib/index.js","mtime":1652517626201},{"path":"/Users/ziya/Development/Other/esi-project-vue/node_modules/ts-loader/index.js","mtime":1652517615040}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy96aXlhL0RldmVsb3BtZW50L090aGVyL2VzaS1wcm9qZWN0LXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3ppeWEvRGV2ZWxvcG1lbnQvT3RoZXIvZXNpLXByb2plY3QtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3ppeWEvRGV2ZWxvcG1lbnQvT3RoZXIvZXNpLXByb2plY3QtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IEFQSV9VUkwgfSBmcm9tICJAL3NlcnZpY2VzL0NvbmZpZyI7Cgp2YXIgQXV0aFNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEF1dGhTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhTZXJ2aWNlKTsKICB9CgogIF9jcmVhdGVDbGFzcyhBdXRoU2VydmljZSwgW3sKICAgIGtleTogImxvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpIHsKICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoQVBJX1VSTCArICcvdXNlcnMvYXV0aGVudGljYXRlJywgewogICAgICAgICJwYXNzd29yZCI6IHBhc3N3b3JkLAogICAgICAgICJyZW1lbWJlck1lIjogdHJ1ZSwKICAgICAgICAidXNlcm5hbWUiOiB1c2VybmFtZQogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4iOiAiKiIKICAgICAgICB9CiAgICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciBjdXJyZW50VXNlciwgcmVzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBjdXJyZW50VXNlciA9IG51bGw7CgogICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLmRhdGEudG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goQVBJX1VSTCArICcvdXNlcnMvY3VycmVudCcsIHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIHJlc3BvbnNlLmRhdGEudG9rZW4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRVc2VyKSk7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEudG9rZW4pKTsKCiAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBjdXJyZW50VXNlcik7CgogICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9nb3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZ2lzdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3Rlcih1c2VybmFtZSwgbGFzdE5hbWUsIGZpcnN0TmFtZSwgZW1haWwsIHBhc3N3b3JkLCB0eXBlLCBhZGRyZXNzLCBwaG9uZU51bWJlcikgewogICAgICByZXR1cm4gYXhpb3MucG9zdChBUElfVVJMICsgJy91c2VycycsIHsKICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgICAgZmlyc3ROYW1lOiBmaXJzdE5hbWUsCiAgICAgICAgbGFzdE5hbWU6IGxhc3ROYW1lLAogICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgICAgIHBob25lTnVtYmVyOiBwaG9uZU51bWJlcgogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4iOiAiKiIKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEF1dGhTZXJ2aWNlOwp9KCk7CgpleHBvcnQgZGVmYXVsdCBuZXcgQXV0aFNlcnZpY2UoKTs="},{"version":3,"sources":["/Users/ziya/Development/Other/esi-project-vue/src/services/AuthService.ts"],"names":[],"mappings":";;;;;AAAA,OAAO,KAAP,MAAkB,OAAlB;AAEA,SAAS,OAAT,QAAwB,mBAAxB;;IACM,W;;;;;;;0BACI,Q,EAAkB,Q,EAAgB;AAEpC,aAAO,KAAK,CACP,IADE,CACG,OAAO,GAAG,qBADb,EACoC;AACnC,oBAAY,QADuB;AAEnC,sBAAc,IAFqB;AAGnC,oBAAY;AAHuB,OADpC,EAKA;AACC,QAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,yCAA+B;AAF1B;AADV,OALA,EAWF,IAXE;AAAA,2EAWG,iBAAM,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,kBAAA,WADF,GACgB,IADhB;;AAAA,uBAEE,QAAQ,CAAC,IAAT,CAAc,KAFhB;AAAA;AAAA;AAAA;;AAAA;AAAA,yBAGmB,KAAK,CAAC,OAAO,GAAG,gBAAX,EAA6B;AAC/C,oBAAA,MAAM,EAAE,KADuC;AAE/C,oBAAA,OAAO,EAAE;AAAE,sBAAA,aAAa,EAAE,YAAY,QAAQ,CAAC,IAAT,CAAc;AAA3C;AAFsC,mBAA7B,CAHxB;;AAAA;AAGM,kBAAA,GAHN;AAAA;AAAA,yBAOsB,GAAG,CAAC,IAAJ,EAPtB;;AAAA;AAOE,kBAAA,WAPF;AAQE,kBAAA,YAAY,CAAC,OAAb,CAAqB,MAArB,EAA6B,IAAI,CAAC,SAAL,CAAe,WAAf,CAA7B;AACA,kBAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,IAAI,CAAC,SAAL,CAAe,QAAQ,CAAC,IAAT,CAAc,KAA7B,CAA9B;;AATF;AAAA,mDAWK,WAXL;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAXH;;AAAA;AAAA;AAAA;AAAA,WAuBA,KAvBA,CAuBM,UAAA,GAAG,EAAG;AACX,QAAA,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,QAAhB;AACH,OAzBE,CAAP;AA0BH;;;6BAEK;AACF,MAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB;AACA,MAAA,YAAY,CAAC,UAAb,CAAwB,MAAxB;AACH;;;6BAEQ,Q,EAAkB,Q,EAAkB,S,EAAmB,K,EAAe,Q,EAAkB,I,EAAc,O,EAAiB,W,EAAmB;AAC/I,aAAO,KAAK,CAAC,IAAN,CAAW,OAAO,GAAG,QAArB,EAA+B;AAClC,QAAA,QAAQ,EAAR,QADkC;AAElC,QAAA,SAAS,EAAT,SAFkC;AAGlC,QAAA,QAAQ,EAAR,QAHkC;AAIlC,QAAA,KAAK,EAAL,KAJkC;AAKlC,QAAA,QAAQ,EAAR,QALkC;AAMlC,QAAA,IAAI,EAAJ,IANkC;AAOlC,QAAA,OAAO,EAAP,OAPkC;AAQlC,QAAA,WAAW,EAAX;AARkC,OAA/B,EASJ;AACC,QAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,yCAA+B;AAF1B;AADV,OATI,CAAP;AAeH;;;;;;AAGL,eAAe,IAAI,WAAJ,EAAf","sourcesContent":["import axios from 'axios';\nimport authHeader from './auth-header';\nimport { API_URL } from \"@/services/Config\";\nclass AuthService {\n    login(username: string, password: string) {\n\n        return axios\n            .post(API_URL + '/users/authenticate', {\n                \"password\": password,\n                \"rememberMe\": true,\n                \"username\": username\n            }, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Access-Control-Allow-Origin\": \"*\"\n                }\n            })\n            .then(async response => {\n                let currentUser = null\n                if (response.data.token) {\n                    let res =  await fetch(API_URL + '/users/current', {\n                        method: \"GET\",\n                        headers: { Authorization: 'Bearer ' + response.data.token }\n                    });\n                    currentUser = await res.json();\n                    localStorage.setItem('user', JSON.stringify(currentUser));\n                    localStorage.setItem('token', JSON.stringify(response.data.token));\n                }\n                return currentUser ;\n            }).catch(err => {\n                console.log(err.response);\n            });\n    }\n\n    logout() {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n    }\n\n    register(username: string, lastName: string, firstName: string, email: string, password: string, type: string, address: string, phoneNumber: string) {\n        return axios.post(API_URL + '/users', {\n            username,\n            firstName,\n            lastName,\n            email,\n            password,\n            type,\n            address,\n            phoneNumber\n        }, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Access-Control-Allow-Origin\": \"*\"\n            }\n        });\n    }\n}\n\nexport default new AuthService();\n"],"sourceRoot":""}]}