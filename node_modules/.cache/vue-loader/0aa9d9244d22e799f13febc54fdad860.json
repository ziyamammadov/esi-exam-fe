{"remainingRequest":"/Users/ziya/Development/Other/esi-project-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ziya/Development/Other/esi-project-vue/src/components/Book.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ziya/Development/Other/esi-project-vue/src/components/Book.vue","mtime":1653250463756},{"path":"/Users/ziya/Development/Other/esi-project-vue/node_modules/cache-loader/dist/cjs.js","mtime":1652517625200},{"path":"/Users/ziya/Development/Other/esi-project-vue/node_modules/babel-loader/lib/index.js","mtime":1652517626201},{"path":"/Users/ziya/Development/Other/esi-project-vue/node_modules/ts-loader/index.js","mtime":1652517615040},{"path":"/Users/ziya/Development/Other/esi-project-vue/node_modules/cache-loader/dist/cjs.js","mtime":1652517625200},{"path":"/Users/ziya/Development/Other/esi-project-vue/node_modules/vue-loader/lib/index.js","mtime":1652517614138}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyBDb21wb25lbnQsIFZ1ZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgQm9va1NlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9Cb29rU2VydmljZSI7CmltcG9ydCB7IG5hbWVzcGFjZSB9IGZyb20gInZ1ZXgtY2xhc3MiOwoKY29uc3QgQXV0aCA9IG5hbWVzcGFjZSgiQXV0aCIpOwoKQENvbXBvbmVudApleHBvcnQgZGVmYXVsdCBjbGFzcyBCb29rIGV4dGVuZHMgVnVlIHsKICBAQXV0aC5TdGF0ZSgidXNlciIpCiAgcHJpdmF0ZSBjdXJyZW50VXNlciE6IGFueTsKICBwcml2YXRlIGlkID0gIiI7CiAgcHJpdmF0ZSBhbGxDYXRlZ29yaWVzOiBhbnk7CiAgcHJpdmF0ZSBib29rQ2F0ZWdvcnk6IGFueTsKICBwcml2YXRlIGJvb2sgPSB7CiAgICBhdXRob3I6ICIiLAogICAgdGl0bGU6ICIiLAogICAgeWVhcjogIiIsCiAgICBzdGF0dXM6ICIiLAogICAgc2VsZWN0ZWRTdGF0dXM6ICIiLAogICAgbGFuZ3VhZ2U6ICIiLAogICAgY2F0ZWdvcmllczogW10sCiAgICBzZWxlY3RlZENhdGVnb3J5OiB0aGlzLmJvb2tDYXRlZ29yeQogIH07CiAgcHJpdmF0ZSBlcnJvciA9IG51bGw7CgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0KICAgIGlmICghdGhpcy5pc0xpYnJhcmlhbigpKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYm9va3MiKTsKICAgIH0KICAgIHRoaXMuZ2V0Q2F0ZWdvcmllcygpOwogICAgaWYgKHRoaXMuaWQpIHsKICAgICAgdGhpcy5nZXRCb29rKCk7CiAgICB9CiAgfQoKICBnZXRDYXRlZ29yaWVzKCkgewogICAgQm9va1NlcnZpY2UuZ2V0Qm9va0NhdGVnb3JpZXMoKS50aGVuKAogICAgICAocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmFsbENhdGVnb3JpZXMgPSByZXNwb25zZS5kYXRhLmNhdGVnb3JpZXM7CiAgICAgICAgfSwKICAgICAgICAoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuZXJyb3IgPQogICAgICAgICAgICAgIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhKSB8fAogICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgfHwKICAgICAgICAgICAgICBlcnJvci50b1N0cmluZygpOwogICAgICAgIH0KICAgICk7CiAgfQoKICBnZXRCb29rKCkgewogICAgQm9va1NlcnZpY2UuZ2V0Qm9vayhwYXJzZUludCh0aGlzLmlkKSkudGhlbigKICAgICAgKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5ib29rLmF1dGhvciA9IHJlc3BvbnNlLmRhdGEuYXV0aG9yOwogICAgICAgIHRoaXMuYm9vay50aXRsZSA9IHJlc3BvbnNlLmRhdGEudGl0bGU7CiAgICAgICAgdGhpcy5ib29rLnllYXIgPSByZXNwb25zZS5kYXRhLnllYXI7CiAgICAgICAgdGhpcy5ib29rLnN0YXR1cyA9IHJlc3BvbnNlLmRhdGEuc3RhdHVzOwogICAgICAgIHRoaXMuYm9vay5jYXRlZ29yaWVzID0gcmVzcG9uc2UuZGF0YS5jYXRlZ29yaWVzOwogICAgICAgIHRoaXMuYm9vay5sYW5ndWFnZSA9IHJlc3BvbnNlLmRhdGEubGFuZ3VhZ2U7CiAgICAgIH0sCiAgICAgIChlcnJvcikgPT4gewogICAgICAgIHRoaXMuYm9vayA9CiAgICAgICAgICAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSkgfHwKICAgICAgICAgIGVycm9yLm1lc3NhZ2UgfHwKICAgICAgICAgIGVycm9yLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgICk7CiAgfQoKICBzYXZlQm9vaygpIHsKCiAgICBpZiAoIXRoaXMuYm9vay5zZWxlY3RlZENhdGVnb3J5KSB7CiAgICAgIHRoaXMuYm9vay5zZWxlY3RlZENhdGVnb3J5ID0gdGhpcy5ib29rLmNhdGVnb3JpZXM7CiAgICB9CgogICAgaWYgKHRoaXMuYm9vay5zZWxlY3RlZFN0YXR1cyA9PSAiIikgewogICAgICB0aGlzLmJvb2suc2VsZWN0ZWRTdGF0dXMgPSB0aGlzLmJvb2suc3RhdHVzOwogICAgfQoKICAgIGlmICh0eXBlb2YgdGhpcy5ib29rLnNlbGVjdGVkQ2F0ZWdvcnkgPT09ICdzdHJpbmcnKSB7CiAgICAgIHRoaXMuYm9vay5zZWxlY3RlZENhdGVnb3J5ID0gdGhpcy5ib29rLnNlbGVjdGVkQ2F0ZWdvcnkuc3BsaXQoIiwiKTsKICAgIH0KCiAgICBpZiAodGhpcy5pZCkgewogICAgICBCb29rU2VydmljZS5lZGl0Qm9vayh7CiAgICAgICAgaWQ6IHRoaXMuaWQsCiAgICAgICAgYXV0aG9yOiB0aGlzLmJvb2suYXV0aG9yLAogICAgICAgIHRpdGxlOiB0aGlzLmJvb2sudGl0bGUsCiAgICAgICAgeWVhcjogdGhpcy5ib29rLnllYXIsCiAgICAgICAgc3RhdHVzOiB0aGlzLmJvb2suc2VsZWN0ZWRTdGF0dXMsCiAgICAgICAgbGFuZ3VhZ2U6IHRoaXMuYm9vay5sYW5ndWFnZSwKICAgICAgICBjYXRlZ29yaWVzOiB0aGlzLmJvb2suc2VsZWN0ZWRDYXRlZ29yeQogICAgICB9KTsKICAgIH0KICAgIGVsc2UgewogICAgICBCb29rU2VydmljZS5jcmVhdGVCb29rKHsKICAgICAgICBhdXRob3I6IHRoaXMuYm9vay5hdXRob3IsCiAgICAgICAgdGl0bGU6IHRoaXMuYm9vay50aXRsZSwKICAgICAgICB5ZWFyOiB0aGlzLmJvb2sueWVhciwKICAgICAgICBzdGF0dXM6IHRoaXMuYm9vay5zZWxlY3RlZFN0YXR1cywKICAgICAgICBsYW5ndWFnZTogdGhpcy5ib29rLmxhbmd1YWdlLAogICAgICAgIGNhdGVnb3JpZXM6IHRoaXMuYm9vay5zZWxlY3RlZENhdGVnb3J5CiAgICAgIH0pOwogICAgfQogICAgdGhpcy4kcm91dGVyLnB1c2goIi9ib29rcyIpOwogICAgdGhpcy4kcm91dGVyLmdvKDApOwogIH0KCiAgaXNMaWJyYXJpYW4oKTogYm9vbGVhbiB7CiAgICBpZiAodGhpcy5jdXJyZW50VXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLmF1dGhvcml0aWVzKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRVc2VyLmF1dGhvcml0aWVzLmluY2x1ZGVzKCJMSUJSQVJJQU4iKTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9Cn0K"},{"version":3,"sources":["Book.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Book.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <header>\n      <h3>{{ id ? \"Edit book\" : \"Create book\" }}</h3>\n    </header>\n    <div>\n      <label>Author: </label>\n      <input v-model=\"book.author\" class=\"form-control\" placeholder=\"Author\"/>\n    </div>\n    <div>\n      <label>Title: </label>\n      <input v-model=\"book.title\" class=\"form-control\" placeholder=\"Title\"/>\n    </div>\n    <div>\n      <label>Year: </label>\n      <input\n        v-model=\"book.year\"\n        class=\"form-control\"\n        placeholder=\"Year\"\n      />\n    </div>\n    <div>\n      <br>\n      <form>\n        <label>Current status: {{this.book.status}}</label><br>\n        <label for=\"statusList\">Choose another status:</label>\n        <select v-model=\"book.selectedStatus\" name=\"statusList\" id=\"statusList\">\n          <option value=\"AVAILABLE\">AVAILABLE</option>\n          <option value=\"BOOKED\">BOOKED</option>\n          <option value=\"DELETED\">DELETED</option>\n          <option value=\"RENTED\">RENTED</option>\n          <option value=\"UNAVAILABLE\">UNAVAILABLE</option>\n        </select>\n      </form>\n    </div>\n    <div>\n      <label>Language: </label>\n      <input\n        v-model=\"book.language\"\n        class=\"form-control\"\n        placeholder=\"Language\"\n      />\n    </div>\n    <div>\n      <br>\n      <form>\n        <label>Current category: {{this.book.categories[0]}}</label><br>\n        <label for=\"categoriesList\">Choose another category:</label>\n        <select v-model=\"book.selectedCategory\" name=\"categoriesList\" id=\"categoriesList\">\n          <option v-for=\"category in allCategories\">{{category.value}}</option>\n        </select>\n      </form>\n    </div>\n    <div>\n      <button class=\"btn btn-primary btn-block mt-2\" @click=\"saveBook()\">\n        Save\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from \"vue-property-decorator\";\nimport BookService from \"@/services/BookService\";\nimport { namespace } from \"vuex-class\";\n\nconst Auth = namespace(\"Auth\");\n\n@Component\nexport default class Book extends Vue {\n  @Auth.State(\"user\")\n  private currentUser!: any;\n  private id = \"\";\n  private allCategories: any;\n  private bookCategory: any;\n  private book = {\n    author: \"\",\n    title: \"\",\n    year: \"\",\n    status: \"\",\n    selectedStatus: \"\",\n    language: \"\",\n    categories: [],\n    selectedCategory: this.bookCategory\n  };\n  private error = null;\n\n  mounted() {\n    this.id = this.$route.params.id;\n    if (!this.currentUser) {\n      this.$router.push(\"/login\");\n    }\n    if (!this.isLibrarian()) {\n      this.$router.push(\"/books\");\n    }\n    this.getCategories();\n    if (this.id) {\n      this.getBook();\n    }\n  }\n\n  getCategories() {\n    BookService.getBookCategories().then(\n      (response) => {\n        this.allCategories = response.data.categories;\n        },\n        (error) => {\n          this.error =\n              (error.response && error.response.data) ||\n              error.message ||\n              error.toString();\n        }\n    );\n  }\n\n  getBook() {\n    BookService.getBook(parseInt(this.id)).then(\n      (response) => {\n        this.book.author = response.data.author;\n        this.book.title = response.data.title;\n        this.book.year = response.data.year;\n        this.book.status = response.data.status;\n        this.book.categories = response.data.categories;\n        this.book.language = response.data.language;\n      },\n      (error) => {\n        this.book =\n          (error.response && error.response.data) ||\n          error.message ||\n          error.toString();\n      }\n    );\n  }\n\n  saveBook() {\n\n    if (!this.book.selectedCategory) {\n      this.book.selectedCategory = this.book.categories;\n    }\n\n    if (this.book.selectedStatus == \"\") {\n      this.book.selectedStatus = this.book.status;\n    }\n\n    if (typeof this.book.selectedCategory === 'string') {\n      this.book.selectedCategory = this.book.selectedCategory.split(\",\");\n    }\n\n    if (this.id) {\n      BookService.editBook({\n        id: this.id,\n        author: this.book.author,\n        title: this.book.title,\n        year: this.book.year,\n        status: this.book.selectedStatus,\n        language: this.book.language,\n        categories: this.book.selectedCategory\n      });\n    }\n    else {\n      BookService.createBook({\n        author: this.book.author,\n        title: this.book.title,\n        year: this.book.year,\n        status: this.book.selectedStatus,\n        language: this.book.language,\n        categories: this.book.selectedCategory\n      });\n    }\n    this.$router.push(\"/books\");\n    this.$router.go(0);\n  }\n\n  isLibrarian(): boolean {\n    if (this.currentUser && this.currentUser.authorities) {\n      return this.currentUser.authorities.includes(\"LIBRARIAN\");\n    }\n    return false;\n  }\n}\n</script>\n"]}]}